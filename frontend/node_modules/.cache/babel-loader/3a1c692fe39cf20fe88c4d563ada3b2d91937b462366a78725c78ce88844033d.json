{"ast":null,"code":"import React,{useContext,useEffect,useReducer}from'react';import Chart from'react-google-charts';import axios from'axios';import{Store}from'../Store';import{getError}from'../utils';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Card from'react-bootstrap/Card';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const reducer=(state,action)=>{switch(action.type){case'FETCH_REQUEST':return{...state,loading:true};case'FETCH_SUCCESS':return{...state,summary:action.payload,loading:false};case'FETCH_FAIL':return{...state,loading:false,error:action.payload};default:return state;}};export default function DashboardScreen(){//const requestUrl = 'https://www.skftechnologies.com:5000';\nconst requestUrl=process.env.REACT_APP_API_URL;const[{loading,summary,error},dispatch]=useReducer(reducer,{loading:true,error:''});const{state}=useContext(Store);const{userInfo}=state;useEffect(()=>{const fetchData=async()=>{try{const{data}=await axios.get(requestUrl+'/api/orders/summary',{headers:{Authorization:`Bearer ${userInfo.token}`}});dispatch({type:'FETCH_SUCCESS',payload:data});}catch(err){dispatch({type:'FETCH_FAIL',payload:getError(err)});}};fetchData();},[userInfo]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:summary.users&&summary.users[0]?summary.users[0].numUsers:0}),/*#__PURE__*/_jsx(Card.Text,{children:\" Users\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:summary.orders&&summary.users[0]?summary.orders[0].numOrders:0}),/*#__PURE__*/_jsx(Card.Text,{children:\" Orders\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\"$\",summary.orders&&summary.users[0]?summary.orders[0].totalSales.toFixed(2):0]}),/*#__PURE__*/_jsx(Card.Text,{children:\" Orders\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sales\"}),summary.dailyOrders.length===0?/*#__PURE__*/_jsx(MessageBox,{children:\"No Sale\"}):/*#__PURE__*/_jsx(Chart,{width:\"100%\",height:\"400px\",chartType:\"AreaChart\",loader:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Chart...\"}),data:[['Date','Sales'],...summary.dailyOrders.map(x=>[x._id,x.sales])]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Categories\"}),summary.productCategories.length===0?/*#__PURE__*/_jsx(MessageBox,{children:\"No Category\"}):/*#__PURE__*/_jsx(Chart,{width:\"100%\",height:\"400px\",chartType:\"PieChart\",loader:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Chart...\"}),data:[['Category','Products'],...summary.productCategories.map(x=>[x._id,x.count])]})]})]})]});}","map":{"version":3,"names":["React","useContext","useEffect","useReducer","Chart","axios","Store","getError","LoadingBox","MessageBox","Row","Col","Card","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","reducer","state","action","type","loading","summary","payload","error","DashboardScreen","requestUrl","process","env","REACT_APP_API_URL","dispatch","userInfo","fetchData","data","get","headers","Authorization","token","err","children","variant","md","Body","Title","users","numUsers","Text","orders","numOrders","totalSales","toFixed","className","dailyOrders","length","width","height","chartType","loader","map","x","_id","sales","productCategories","count"],"sources":["C:/Users/User/Amazona/frontend/src/screens/DashboardScreen.js"],"sourcesContent":["import React, { useContext, useEffect, useReducer } from 'react';\r\nimport Chart from 'react-google-charts';\r\nimport axios from 'axios';\r\nimport { Store } from '../Store';\r\nimport { getError } from '../utils';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Card from 'react-bootstrap/Card';\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_REQUEST':\r\n      return { ...state, loading: true };\r\n    case 'FETCH_SUCCESS':\r\n      return {\r\n        ...state,\r\n        summary: action.payload,\r\n        loading: false,\r\n      };\r\n    case 'FETCH_FAIL':\r\n      return { ...state, loading: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default function DashboardScreen() {\r\n  //const requestUrl = 'https://www.skftechnologies.com:5000';\r\n  const requestUrl = process.env.REACT_APP_API_URL;\r\n  const [{ loading, summary, error }, dispatch] = useReducer(reducer, {\r\n    loading: true,\r\n    error: '',\r\n  });\r\n  const { state } = useContext(Store);\r\n  const { userInfo } = state;\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const { data } = await axios.get(requestUrl + '/api/orders/summary', {\r\n          headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        dispatch({ type: 'FETCH_SUCCESS', payload: data });\r\n      } catch (err) {\r\n        dispatch({\r\n          type: 'FETCH_FAIL',\r\n          payload: getError(err),\r\n        });\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [userInfo]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Dashboard</h1>\r\n      {loading ? (\r\n        <LoadingBox />\r\n      ) : error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n      ) : (\r\n        <>\r\n          <Row>\r\n            <Col md={4}>\r\n              <Card>\r\n                <Card.Body>\r\n                  <Card.Title>\r\n                    {summary.users && summary.users[0]\r\n                      ? summary.users[0].numUsers\r\n                      : 0}\r\n                  </Card.Title>\r\n                  <Card.Text> Users</Card.Text>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Card>\r\n                <Card.Body>\r\n                  <Card.Title>\r\n                    {summary.orders && summary.users[0]\r\n                      ? summary.orders[0].numOrders\r\n                      : 0}\r\n                  </Card.Title>\r\n                  <Card.Text> Orders</Card.Text>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Card>\r\n                <Card.Body>\r\n                  <Card.Title>\r\n                    $\r\n                    {summary.orders && summary.users[0]\r\n                      ? summary.orders[0].totalSales.toFixed(2)\r\n                      : 0}\r\n                  </Card.Title>\r\n                  <Card.Text> Orders</Card.Text>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <div className=\"my-3\">\r\n            <h2>Sales</h2>\r\n            {summary.dailyOrders.length === 0 ? (\r\n              <MessageBox>No Sale</MessageBox>\r\n            ) : (\r\n              <Chart\r\n                width=\"100%\"\r\n                height=\"400px\"\r\n                chartType=\"AreaChart\"\r\n                loader={<div>Loading Chart...</div>}\r\n                data={[\r\n                  ['Date', 'Sales'],\r\n                  ...summary.dailyOrders.map((x) => [x._id, x.sales]),\r\n                ]}\r\n              ></Chart>\r\n            )}\r\n          </div>\r\n          <div className=\"my-3\">\r\n            <h2>Categories</h2>\r\n            {summary.productCategories.length === 0 ? (\r\n              <MessageBox>No Category</MessageBox>\r\n            ) : (\r\n              <Chart\r\n                width=\"100%\"\r\n                height=\"400px\"\r\n                chartType=\"PieChart\"\r\n                loader={<div>Loading Chart...</div>}\r\n                data={[\r\n                  ['Category', 'Products'],\r\n                  ...summary.productCategories.map((x) => [x._id, x.count]),\r\n                ]}\r\n              ></Chart>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
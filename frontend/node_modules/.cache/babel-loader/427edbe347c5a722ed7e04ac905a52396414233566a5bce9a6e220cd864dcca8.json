{"ast":null,"code":"import React from'react';import{useContext}from'react';import{Store}from'../Store';import{Helmet}from'react-helmet-async';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){//const requestUrl = \"https://www.skftechnologies.com:5000\";\nconst requestUrl=process.env.REACT_APP_API_URL;const navigate=useNavigate();const{state,dispatch:ctxDispatch}=useContext(Store);const{cart:{cartItems}}=state;const updateCartHandler=async(item,quantity)=>{const{data}=await axios.get(requestUrl+`/api/products/${item._id}`);if(data.countInStock<quantity){window.alert('Sorry. Product is out of stock');return;}ctxDispatch({type:'CART_ADD_ITEM',payload:{...item,quantity}});};const removeItemHandler=item=>{ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};const checkoutHandler=()=>{navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:`/product/${item.slug}`,children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{onClick:()=>updateCartHandler(item,item.quantity-1),variant:\"light\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:()=>updateCartHandler(item,item.quantity+1),disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[item.price,\" TND\"]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{onClick:()=>removeItemHandler(item),variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id))})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:cartItems.reduce((a,c)=>a+c.quantity,0)>1?/*#__PURE__*/_jsxs(\"h4\",{children:[\" Subtotal (\",cartItems.reduce((a,c)=>a+c.quantity,0),' ',\"items) :\",' ',cartItems.reduce((a,c)=>a+c.price*c.quantity,0),\" TND\"]}):/*#__PURE__*/_jsxs(\"h4\",{children:[\" Subtotal (\",cartItems.reduce((a,c)=>a+c.quantity,0),' ',\"item) :\",' ',cartItems.reduce((a,c)=>a+c.price*c.quantity,0),\" TND\"]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Passer ma commande\"})})})]})})})})]})]});}","map":{"version":3,"names":["React","useContext","Store","Helmet","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","CartScreen","requestUrl","process","env","REACT_APP_API_URL","navigate","state","dispatch","ctxDispatch","cart","cartItems","updateCartHandler","item","quantity","data","get","_id","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","className","children","md","length","to","map","Item","src","image","alt","name","slug","onClick","variant","disabled","price","Body","reduce","a","c"],"sources":["C:/Users/User/Amazona/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React from 'react';\r\nimport { useContext } from 'react';\r\nimport { Store } from '../Store';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport MessageBox from '../components/MessageBox';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nexport default function CartScreen() {\r\n  //const requestUrl = \"https://www.skftechnologies.com:5000\";\r\n  const requestUrl = process.env.REACT_APP_API_URL;\r\n  const navigate = useNavigate();\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const {\r\n    cart: { cartItems },\r\n  } = state;\r\n  const updateCartHandler = async (item, quantity) => {\r\n    const { data } = await axios.get(requestUrl+`/api/products/${item._id}`);\r\n    if (data.countInStock < quantity) {\r\n      window.alert('Sorry. Product is out of stock');\r\n      return;\r\n    }\r\n    ctxDispatch({\r\n      type: 'CART_ADD_ITEM',\r\n      payload: { ...item, quantity },\r\n    });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    navigate('/signin?redirect=/shipping');\r\n  };\r\n  return (\r\n    <div className=\"position-relative\">\r\n      \r\n      <Helmet>\r\n        <title>Shopping Cart</title>\r\n      </Helmet>\r\n      <h1>Shopping Cart</h1>\r\n      <Row>\r\n        <Col md={8}>\r\n          {cartItems.length === 0 ? (\r\n            <MessageBox>\r\n              Cart is empty. <Link to=\"/\">Go Shopping</Link>\r\n            </MessageBox>\r\n          ) : (\r\n            <ListGroup>\r\n              {cartItems.map((item) => (\r\n                <ListGroup.Item key={item._id}>\r\n                  <Row className=\"align-items-center\">\r\n                    <Col md={4}>\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"img-fluid rounded img-thumbnail\"\r\n                      ></img>{' '}\r\n                      <Link to={`/product/${item.slug}`}>{item.name}</Link>\r\n                    </Col>\r\n                    <Col md={3}>\r\n                      \r\n                      <Button\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity - 1)\r\n                        }\r\n                        variant=\"light\"\r\n                        disabled={item.quantity === 1}\r\n                      >\r\n                        <i className=\"fas fa-minus-circle\"></i>\r\n                      </Button>{' '}\r\n                      <span>{item.quantity}</span>{' '}\r\n                      \r\n                        <Button\r\n                        variant=\"light\"\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity + 1)\r\n                        }\r\n                        disabled={item.quantity === item.countInStock}\r\n                        >\r\n                        \r\n                      \r\n                        <i className=\"fas fa-plus-circle\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                    <Col md={3}>{item.price} TND</Col>\r\n                    <Col md={2}>\r\n                      \r\n                      <Button\r\n                        onClick={() => removeItemHandler(item)}\r\n                        variant=\"light\"\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n              ))}\r\n            </ListGroup>\r\n          )}\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  \r\n                  {cartItems.reduce((a, c) => a + c.quantity, 0) > 1 ? (\r\n                    <h4> Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                      items) :{' '}\r\n                                       \r\n                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)} TND\r\n                  </h4>) : (\r\n                     <h4> Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                     item) :{' '}\r\n                                      \r\n                   {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)} TND\r\n                 </h4>    \r\n                  )} \r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <div className=\"d-grid\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"primary\"\r\n                      onClick={checkoutHandler}\r\n                      disabled={cartItems.length === 0}\r\n                    >\r\n                      Passer ma commande\r\n                    </Button>\r\n                  </div>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}